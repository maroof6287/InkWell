<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Inkwell</title>
<meta name="base:app_id" content="69415ff9d19763ca26ddc353" />
  
  <style>
    :root{
      --cream:#f4ecd8;
      --sepia:#b69260;
      --charcoal:#1b1a17;
      --maroon:#4b1d25;
      --ink:#0b0b0a;
      --paper:#f7f0dc;
      --paper2:#efe2c2;
      --edge:#d8c7a2;
      --shadow: rgba(0,0,0,.28);
      --ring: rgba(75,29,37,.35);
      --radius: 16px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      color: var(--charcoal);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(75,29,37,.25), transparent 60%),
        radial-gradient(900px 600px at 110% 20%, rgba(182,146,96,.25), transparent 55%),
        linear-gradient(180deg, #0b0b0a, #11100d 45%, #0b0b0a);
      display:flex;
      justify-content:center;
    }
    #app{
      width:min(980px, 100%);
      padding: max(12px, env(safe-area-inset-top)) 12px max(14px, env(safe-area-inset-bottom));
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 10px 8px;
    }
    .brand{ display:flex; align-items:center; gap:10px; }
    .sigil{
      width:38px; height:38px; border-radius:12px;
      background:
        radial-gradient(circle at 35% 30%, rgba(244,236,216,.9), rgba(244,236,216,.2) 55%, transparent 60%),
        radial-gradient(circle at 70% 75%, rgba(182,146,96,.9), rgba(182,146,96,.25) 55%, transparent 60%),
        linear-gradient(145deg, rgba(75,29,37,.75), rgba(27,26,23,.85));
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(244,236,216,.14);
      position:relative;
      overflow:hidden;
    }
    .sigil::after{
      content:"";
      position:absolute; inset:-20%;
      background: radial-gradient(circle at 60% 40%, rgba(0,0,0,.55), transparent 55%);
      transform: rotate(18deg);
      mix-blend-mode:multiply;
    }
    .brandtext .title{
      font-size: 18px; letter-spacing:.08em;
      text-transform: uppercase;
      color: var(--cream);
    }
    .brandtext .subtitle{
      font-size: 12px;
      color: rgba(244,236,216,.72);
      margin-top:2px;
    }
    .envpill{
      font-size:12px;
      color: rgba(244,236,216,.85);
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(244,236,216,.16);
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
      user-select:none;
    }

    .sheet{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 12px;
      align-items:start;
    }
    @media (max-width: 860px){
      .sheet{ grid-template-columns: 1fr; }
    }

    .card, .journal{
      background: linear-gradient(180deg, var(--paper), var(--paper2));
      border-radius: var(--radius);
      border: 1px solid rgba(27,26,23,.18);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      position:relative;
      overflow:hidden;
    }
    .card::before, .journal::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 220px at 10% 0%, rgba(182,146,96,.25), transparent 55%),
        radial-gradient(700px 260px at 90% 0%, rgba(75,29,37,.18), transparent 60%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.02), rgba(0,0,0,.02) 2px, transparent 2px, transparent 5px);
      pointer-events:none;
      mix-blend-mode:multiply;
    }
    .card{ padding: 14px 14px 12px; margin-bottom:12px; }
    .label{
      font-size: 12px;
      letter-spacing:.12em;
      text-transform: uppercase;
      color: rgba(27,26,23,.72);
    }
    .cardhead{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .ghost{
      background: transparent;
      border: 1px solid rgba(27,26,23,.22);
      border-radius: 10px;
      padding: 6px 10px;
      cursor:pointer;
      color: rgba(27,26,23,.78);
    }
    .ghost:active{ transform: translateY(1px); }
    .prompt{
      margin-top:10px;
      font-size: 18px;
      line-height: 1.25;
      color: var(--charcoal);
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.42);
      border: 1px dashed rgba(75,29,37,.25);
    }
    .hint{
      margin-top:10px;
      font-size: 12px;
      color: rgba(27,26,23,.62);
    }

    .row{ margin-top:10px; display:flex; gap:10px; }
    .input, .textarea{
      width:100%;
      background: rgba(255,255,255,.52);
      border: 1px solid rgba(27,26,23,.18);
      border-radius: 14px;
      padding: 12px 12px;
      outline:none;
      font-size: 14px;
      color: var(--charcoal);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.25);
    }
    .input:focus, .textarea:focus{
      box-shadow: 0 0 0 3px var(--ring), inset 0 0 0 1px rgba(255,255,255,.3);
      border-color: rgba(75,29,37,.35);
    }
    .textarea{
      margin-top:10px;
      height: 130px;
      resize:none;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      line-height:1.25;
    }
    .actions{ display:flex; gap:10px; margin-top:10px; }
    .btn{
      border-radius: 14px;
      border: 1px solid rgba(27,26,23,.18);
      background: rgba(255,255,255,.55);
      padding: 10px 12px;
      cursor:pointer;
      font-size: 14px;
      color: rgba(27,26,23,.9);
      transition: transform .06s ease, filter .12s ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(75,29,37,.92), rgba(49,18,23,.96));
      color: var(--cream);
      border-color: rgba(244,236,216,.18);
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
    }
    .btn.tip{
      background: linear-gradient(180deg, rgba(182,146,96,.9), rgba(134,95,50,.92));
      color: #101010;
      border-color: rgba(0,0,0,.12);
    }
    .btn.wide{ width:100%; margin-top:10px; }

    .micro{
      margin-top:10px;
      font-size: 12px;
      color: rgba(27,26,23,.62);
    }

    .journal{ padding: 12px; }
    .journalhead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .entries{
      max-height: calc(100vh - 240px);
      overflow:auto;
      padding-right: 2px;
    }
    .entry{
      border-radius: 16px;
      border: 1px solid rgba(27,26,23,.14);
      background: rgba(255,255,255,.46);
      padding: 10px 10px 9px;
      margin-bottom:10px;
      position:relative;
      overflow:hidden;
    }
    .entry::before{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at 18% 20%, rgba(75,29,37,.12), transparent 55%);
      pointer-events:none;
      mix-blend-mode:multiply;
    }
    .entryTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .stamp{
      font-size: 11px;
      letter-spacing:.06em;
      color: rgba(27,26,23,.62);
    }
    .link{
      font-size: 11px;
      color: rgba(75,29,37,.9);
      text-decoration: none;
      border-bottom: 1px dashed rgba(75,29,37,.35);
      padding-bottom:1px;
    }
    .clip{
      margin-top:8px;
      font-size: 14px;
      line-height: 1.25;
      color: rgba(27,26,23,.92);
      white-space: pre-wrap;
    }
    .marginalia{
      margin-top:8px;
      font-size: 11px;
      color: rgba(27,26,23,.6);
    }
    .marginalia span{ color: rgba(75,29,37,.9); }

    .empty{
      margin-top: 16px;
      padding: 14px;
      text-align:center;
      font-size: 13px;
      color: rgba(27,26,23,.58);
      border-radius: 16px;
      border: 1px dashed rgba(27,26,23,.18);
      background: rgba(255,255,255,.36);
    }

    .footer{ margin-top: 10px; }
    .fine{
      font-size: 11px;
      color: rgba(244,236,216,.62);
      text-align:center;
    }

    /* Floating scrap animation */
    .scrapFloat{
      position: fixed;
      z-index: 50;
      background: linear-gradient(180deg, var(--paper), var(--paper2));
      border: 1px solid rgba(27,26,23,.18);
      border-radius: 14px;
      box-shadow: 0 30px 70px rgba(0,0,0,.45);
      padding: 8px;
      transform: translate(0,0) rotate(-2deg) scale(1);
      opacity: 1;
      transition: transform .95s cubic-bezier(.2,.9,.15,1), opacity .95s ease;
      pointer-events:none;
    }
    .scrapFloat.go{ }
    .scrapInner{
      font-size: 12px;
      line-height: 1.25;
      color: rgba(27,26,23,.88);
    }

    /* Tip sheet */
    .backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      opacity: 0;
      transition: opacity .16s ease;
      z-index: 90;
    }
    .backdrop.show{ opacity: 1; }
    .sheetmodal{
      position: fixed;
      left: 50%;
      transform: translateX(-50%) translateY(24px);
      bottom: 10px;
      width: min(520px, calc(100vw - 16px));
      background: linear-gradient(180deg, var(--paper), var(--paper2));
      border: 1px solid rgba(27,26,23,.18);
      border-radius: 22px;
      box-shadow: 0 40px 120px rgba(0,0,0,.6);
      z-index: 95;
      opacity: 0;
      transition: transform .18s ease, opacity .18s ease;
      overflow:hidden;
    }
    .sheetmodal.show{
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    .sheetgrab{
      width: 64px;
      height: 5px;
      border-radius: 999px;
      background: rgba(27,26,23,.22);
      margin: 10px auto 6px;
    }
    .sheetcontent{ padding: 8px 14px 14px; position:relative; }
    .sheettitle{
      font-size: 16px;
      color: rgba(27,26,23,.92);
      margin: 4px 0 4px;
      letter-spacing:.02em;
    }
    .sheetdesc{
      font-size: 12px;
      color: rgba(27,26,23,.62);
      margin-bottom: 10px;
    }
    .presetgrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .chip{
      border-radius: 999px;
      border: 1px solid rgba(27,26,23,.18);
      background: rgba(255,255,255,.52);
      padding: 10px 10px;
      cursor:pointer;
      font-size: 13px;
      transition: transform .06s ease, box-shadow .12s ease;
    }
    .chip.on{
      background: rgba(75,29,37,.92);
      color: var(--cream);
      border-color: rgba(244,236,216,.18);
      box-shadow: 0 10px 24px rgba(0,0,0,.18);
    }
    .toast{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(27,26,23,.92);
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(27,26,23,.18);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .toast.pop{
      animation: pop .22s ease;
    }
    @keyframes pop{
      0%{ transform: translateY(6px); opacity: .1; }
      100%{ transform: translateY(0); opacity: 1; }
    }

    /* Ink pulse (preflight animation) */
    .sheetmodal.inkpulse .sheetcontent::before{
      content:"";
      position:absolute;
      left: 18px;
      top: 14px;
      width: 120px;
      height: 70px;
      background: radial-gradient(circle at 40% 45%, rgba(0,0,0,.55), rgba(0,0,0,.22) 55%, transparent 70%);
      filter: blur(1px);
      opacity: 0;
      transform: scale(.6) rotate(-8deg);
      animation: ink 1.2s ease forwards;
      pointer-events:none;
      mix-blend-mode:multiply;
    }
    @keyframes ink{
      0%{ opacity: 0; transform: scale(.5) rotate(-10deg); }
      40%{ opacity: .55; transform: scale(1) rotate(-8deg); }
      100%{ opacity: 0; transform: scale(1.18) rotate(-6deg); }
    }
  </style>


  <!-- Farcaster Mini App -->
  <meta name="fc:miniapp" content="{&quot;version&quot;:&quot;1&quot;,&quot;imageUrl&quot;:&quot;https://inkwellx.vercel.app/assets/embed-3x2.png&quot;,&quot;button&quot;:{&quot;title&quot;:&quot;Open Inkwell&quot;,&quot;action&quot;:{&quot;type&quot;:&quot;launch_frame&quot;,&quot;url&quot;:&quot;https://inkwellx.vercel.app/&quot;}},&quot;splashImageUrl&quot;:&quot;https://inkwellx.vercel.app/assets/splash.png&quot;,&quot;splashBackgroundColor&quot;:&quot;#020617&quot;,&quot;name&quot;:&quot;Inkwell&quot;}" />
  
  <meta name="fc:frame" content="{&quot;version&quot;:&quot;next&quot;,&quot;imageUrl&quot;:&quot;https://inkwellx.vercel.app/assets/embed-3x2.png&quot;,&quot;button&quot;:{&quot;title&quot;:&quot;Open Inkwell&quot;,&quot;action&quot;:{&quot;type&quot;:&quot;launch_frame&quot;,&quot;name&quot;:&quot;Inkwell&quot;,&quot;url&quot;:&quot;https://inkwellx.vercel.app/&quot;,&quot;splashImageUrl&quot;:&quot;https://inkwellx.vercel.app/assets/splash.png&quot;,&quot;splashBackgroundColor&quot;:&quot;#020617&quot;}}}" />
<!-- Backwards compatible Frame -->


  <!-- Open Graph -->
  <meta property="og:title" content="Inkwell" />
  <meta property="og:description" content="Tear clippings from the web into a leather‑bound journal—daily marginalia prompts, tactile scraps, and fast recall." />
  <meta property="og:image" content="https://inkwellx.vercel.app/assets/hero.png" />
  <meta property="og:url" content="https://inkwellx.vercel.app/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
</head>

<body>
  <div id="app">
    <header class="topbar">
      <div class="brand">
        <div class="sigil" aria-hidden="true"></div>
        <div class="brandtext">
          <div class="title">Inkwell</div>
          <div class="subtitle">Victorian read‑later, reimagined</div>
        </div>
      </div>
      <div class="envpill" id="envPill">Detecting…</div>
    </header>

    <main class="sheet">
      <section class="left">
        <div class="card">
          <div class="cardhead">
            <div class="label">Daily marginalia</div>
            <button class="ghost" id="newPromptBtn" title="Shuffle prompt">↻</button>
          </div>
          <div class="prompt" id="promptText"></div>
          <div class="hint">Small habit: clip one thing, add one line.</div>
        </div>

        <div class="card">
          <div class="label">Tear a clipping</div>
          <div class="row">
            <input id="urlInput" class="input" placeholder="Paste a URL (optional) — https://…" inputmode="url" />
          </div>
          <textarea id="clipInput" class="textarea" placeholder="Paste a paragraph, snippet, or your note…"></textarea>

          <div class="actions">
            <button id="tearBtn" class="btn primary">Tear into journal</button>
            <button id="clearBtn" class="btn">Clear</button>
          </div>

          <div class="micro">
            Tip: In a Mini App, your “tear” animates before the wallet opens — so it feels intentional.
          </div>
        </div>
      </section>

      <aside class="right" aria-label="Journal">
        <div class="journal">
          <div class="journalhead">
            <div class="label">Leather‑bound journal</div>
            <button id="tipBtn" class="btn tip">Tip</button>
          </div>
          <div id="entries" class="entries"></div>
          <div class="empty" id="emptyState">No clippings yet. Tear your first scrap.</div>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <div class="fine">Stored locally in this browser. Export is coming soon (by design: minimal).</div>
    </footer>
  </div>

  <!-- Bottom sheet: Tip -->
  <div class="backdrop" id="tipBackdrop" hidden></div>
  <div class="sheetmodal" id="tipSheet" hidden role="dialog" aria-modal="true" aria-label="Send a tip">
    <div class="sheetgrab" aria-hidden="true"></div>
    <div class="sheetcontent">
      <div class="sheettitle">Send a tip (USDC on Base)</div>
      <div class="sheetdesc">A small ink‑stain of gratitude. Presets are USD‑equivalent.</div>

      <div class="presetgrid" id="presetGrid">
        <button class="chip" data-amt="1">$1</button>
        <button class="chip" data-amt="5">$5</button>
        <button class="chip" data-amt="10">$10</button>
        <button class="chip" data-amt="25">$25</button>
      </div>

      <div class="row">
        <input id="customAmt" class="input" placeholder="Custom amount (e.g. 3.50)" inputmode="decimal" />
      </div>

      <button id="sendTipBtn" class="btn primary wide">Send USDC</button>
      <button id="closeTipBtn" class="btn wide">Close</button>

      <div class="toast" id="toast" hidden></div>
    </div>
  </div>

  <script type="module" src="./script.js"></script>
</body>
</html>